<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Markerless WebAR - Multiple Models</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- A-Frame + extras -->
    <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-ar-hit-test-component@1.1.2/dist/aframe-ar-hit-test-component.min.js"></script>

    <style>
      body { margin: 0; overflow: hidden; font-family: sans-serif; }
      #overlay {
        position: fixed;
        bottom: 15px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        background: rgba(0,0,0,0.6);
        padding: 10px;
        border-radius: 10px;
        z-index: 999;
      }
      select, button {
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        font-size: 14px;
      }
      select { background: white; color: black; }
      button { background: #007bff; color: white; cursor: pointer; }
      button:hover { background: #0056b3; }
    </style>
  </head>
  <body>
    <a-scene
      renderer="colorManagement: true; physicallyCorrectLights"
      xr-mode-ui="enabled: true"
      embedded
      vr-mode-ui="enabled: false"
      webxr="optionalFeatures: hit-test, dom-overlay; overlayElement: #overlay">

      <a-camera position="0 0 0"></a-camera>

      <!-- Default model (hidden until placed) -->
      <a-entity
        id="model"
        gltf-model="url(./models/robot.glb)"
        visible="false"
        scale="0.2 0.2 0.2"
        shadow="cast: true">
      </a-entity>

      <!-- Hit test cursor -->
      <a-entity
        id="cursor"
        ar-hit-test="target:#model; type:map; offset:0 0 0">
      </a-entity>
    </a-scene>

    <!-- UI -->
    <div id="overlay">
      <select id="model-select">
        <option value="./models/robot.glb">Robot</option>
        <option value="./models/mascot.glb">Mascot</option>
        <option value="./models/playground.glb">Playground</option>
      </select>
      <button id="place-btn">üìç Place</button>
    </div>

    <script>
      const select = document.getElementById("model-select");
      const placeBtn = document.getElementById("place-btn");
      const model = document.getElementById("model");

      // üîÑ Switch model before placing
      select.addEventListener("change", () => {
        model.setAttribute("gltf-model", "url(" + select.value + ")");
        model.setAttribute("visible", "false"); // hide until placed
      });

      // üìç Place model on surface
      placeBtn.addEventListener("click", () => {
        model.setAttribute("visible", "true");
      });
    </script>
  </body>
</html>
